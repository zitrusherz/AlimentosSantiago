{% extends 'gestion_pedidos/base.html' %}

{% block content %}
<div class="container mt-5">
    <div class="form-register">
        <h1 class="text-center">Registro</h1>
        <form id="register-form" method="post" novalidate>
            {% csrf_token %}
            {{ form.non_field_errors }}
            <div class="form-group">
                {{ form.username.label_tag }} {{ form.username }}
                {{ form.username.errors }}
            </div>
            <div class="form-group">
                {{ form.password1.label_tag }} {{ form.password1 }}
                {{ form.password1.errors }}
            </div>
            <div class="form-group">
                {{ form.password2.label_tag }} {{ form.password2 }}
                {{ form.password2.errors }}
            </div>
            <button type="submit" class="btn btn-register mt-3">Registrarse</button>
        </form>
    </div>
</div>

<script>
$(document).ready(function () {
    $("#register-form").validate({
        rules: {
            username: {
                required: true,
                minlength: 3
            },
            password1: {
                required: true,
                minlength: 8
            },
            password2: {
                required: true,
                minlength: 8,
                equalTo: "#id_password1"
            }
        },
        messages: {
            username: {
                required: "Por favor, introduce un nombre de usuario.",
                minlength: "Tu nombre de usuario debe tener al menos 3 caracteres."
            },
            password1: {
                required: "Por favor, introduce una contraseña.",
                minlength: "Tu contraseña debe tener al menos 8 caracteres."
            },
            password2: {
                required: "Por favor, confirma tu contraseña.",
                minlength: "Tu contraseña debe tener al menos 8 caracteres.",
                equalTo: "Las contraseñas no coinciden."
            }
        },
        errorElement: "div",
        errorPlacement: function (error, element) {
            error.addClass("invalid-feedback");
            element.closest(".form-group").append(error);
        },
        highlight: function (element, errorClass, validClass) {
            $(element).addClass("is-invalid").removeClass("is-valid");
        },
        unhighlight: function (element, errorClass, validClass) {
            $(element).addClass("is-valid").removeClass("is-invalid");
        }
    });
});
</script>
{% endblock %}
